(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{49:function(e,t,a){e.exports=a(83)},54:function(e,t,a){},55:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),s=(a(54),a(14)),o=a(15),i=a(17),u=a(16),m=a(18),d=a(21),h=a(22),f=(a(55),a(9)),p=a(19),b=a(7),v=a.n(b),E=function(e){var t=e.searchChange;return r.a.createElement("div",{className:"Form"},r.a.createElement("form",null,r.a.createElement(v.a.Group,{controlId:"formGroupSearch"},r.a.createElement(v.a.Control,{as:"input",type:"text",placeholder:"Search...",onChange:t}))))},k=a(44),j=a.n(k),y=a(13),O=a.n(y),g=a(25),S=a.n(g),C=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).fetchData=function(t,a,n){fetch(t).then(function(e){return e.json()}).then(function(t){var n=a.concat(t.results);e.handleNestedUrl(n),e.newFuzzySearch(e.state.searchField,n),null!==t.next?e.fetchData(t.next,n):(e.handleNestedUrl(n),e.newFuzzySearch(e.state.searchField,n))}).catch(function(e){return console.log("Fail",e)}),void 0!==n&&e.setState({apiList:n,keys:Object.keys(n)})},e.handleNestedUrl=function(t){e.setState({data:t});for(var a=Object.keys(t[0]),n=function(n){for(var r=Object.values(t[n]),c=function(t){var n=a[t];if(0===r[t].length)e.setState(function(e){return{data:e.data.map(function(e){return e.name===r[0]?Object(p.a)({},e,Object(f.a)({},n,"n/a")):e})}});else if(Array.isArray(r[t])){var c=[];r[t].map(function(e){return fetch(e).then(function(e){return e.json()}).then(function(e){void 0!==e.name?c.push(e.name):void 0!==e.title?c.push(e.title):void 0!==e.key&&c.push(e.key)}).catch(function(e){return console.log("Fail",e)})}),e.setState(function(e){return{data:e.data.map(function(e){return e.name===r[0]?Object(p.a)({},e,Object(f.a)({},n,c)):e})}})}else if(-1!==r[t].indexOf("swapi"))fetch(r[t]).then(function(e){return e.json()}).then(function(t){return e.setState(function(a){return{data:a.data.map(function(a){var c;return a.name===r[0]?Object(p.a)({},a,(c={},Object(f.a)(c,n,t.name),Object(f.a)(c,"url",e.props.url),c)):a})}})}).catch(function(e){return console.log("Fail",e)});else if(r[t].match(/:\d{2}:/g)){var l=r[t].slice(0,10);e.setState(function(e){return{data:e.data.map(function(e){return e.name===r[0]?Object(p.a)({},e,Object(f.a)({},n,l)):e})}})}},l=0;l<a.length;l++)c(l)},r=0;r<t.length;r++)n(r)},e.handleSelect=function(t){e.fetchData(e.state.apiList[t.target.value],[]),e.setState({select:t.target.value})},e.handleClick=function(t){e.props.url(t),e.setState({isClicked:!e.state.isClicked})},e.handleSearch=function(t){e.setState({searchField:t.target.value}),e.newFuzzySearch(t.target.value,e.state.data)},e.newFuzzySearch=function(t,a){var n={shouldSort:!0,tokenize:!0,matchAllTokens:!0,threshold:.5,location:0,distance:100,keys:Object.keys(a[0])},r=new j.a(a,n).search(t);e.setState({searchResults:r})},e.userCallBackMethod=function(t){e.props.userEmail(t)},e.state={apiList:{},keys:[],data:[{"Loading...":null}],select:"people",searchField:"",searchResults:[],isClicked:!1,clickUrl:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://swapi.co/api/").then(function(e){return e.json()}).then(function(t){return e.fetchData(t[e.state.select],[],t)}).catch(function(e){return console.log("Fail",e)}),null!==localStorage.getItem("currentUser")&&(localStorage.getItem("currentUser"),this.userCallBackMethod(JSON.parse(localStorage.getItem("currentUser"))))}},{key:"render",value:function(){var e=this,t=this.state,a=t.keys,n=t.data,c=t.isClicked,l=t.searchResults,s=t.searchField,o=Object.keys(n[0]).slice(0,4);if(""!==s)var i=l;else i=n;return c?r.a.createElement(h.a,{to:"/info"}):r.a.createElement("div",null,r.a.createElement("h2",null,"Data From StarWars"),r.a.createElement(S.a,{className:"mt-4"},r.a.createElement(O.a,{xs:4,className:"selectField"},r.a.createElement(v.a,{onChange:this.handleSelect},r.a.createElement(v.a.Control,{as:"select"},a.map(function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement(O.a,{xs:8,className:"searchField"},r.a.createElement(E,{searchChange:this.handleSearch}))),r.a.createElement(S.a,{className:"mt-4 mb-5"},r.a.createElement(O.a,{className:"col-centered"},r.a.createElement("table",null,r.a.createElement("tbody",{className:"tableBody"},r.a.createElement("tr",{className:"tableTitleRow"},o.map(function(e){return r.a.createElement("th",{key:e},e.replace(/_/g," "))})),i.map(function(t){return r.a.createElement("tr",{key:Object.values(t)[0],onClick:e.handleClick.bind(e,t.url),className:"selectRow"},r.a.createElement("td",{key:Object.values(t)[0]+0},Object.values(t)[0]),r.a.createElement("td",{key:Object.values(t)[0]+1},Object.values(t)[1]),r.a.createElement("td",{key:Object.values(t)[0]+2},Object.values(t)[2]),r.a.createElement("td",{key:Object.values(t)[0]+3},Object.values(t)[3]))}))))))}}]),t}(n.Component),N=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleNestedUrl=function(t){e.setState({data:t});for(var a=Object.keys(t),n=Object.values(t),c=0;c<a.length;c++)0===n[c].length?function(){var t=a[c];e.setState(function(e){return{data:Object(p.a)({},e.data,Object(f.a)({},t,"n/a"))}})}():Array.isArray(n[c])?function(){var t=[],l=a[c];n[c].map(function(e){return fetch(e).then(function(e){return e.json()}).then(function(e){void 0!==e.name?t.push(r.a.createElement("div",{key:e.name},e.name)):void 0!==e.title?t.push(r.a.createElement("div",{key:e.title},e.title)):void 0!==e.key&&t.push(r.a.createElement("div",{key:e.key},e.key))}).catch(function(e){return console.log("Fail",e)})}),e.setState(function(e){return{data:Object(p.a)({},e.data,Object(f.a)({},l,t))}})}():-1!==n[c].indexOf("swapi")?function(){var t=a[c];fetch(n[c]).then(function(e){return e.json()}).then(function(a){return e.setState(function(n){var r;return{data:Object(p.a)({},n.data,(r={},Object(f.a)(r,t,a.name),Object(f.a)(r,"url",e.props.url),r))}})}).catch(function(e){return console.log("Fail",e)})}():n[c].match(/:\d{2}:/g)&&function(){var t=n[c].slice(0,10),r=a[c];e.setState(function(e){return{data:Object(p.a)({},e.data,Object(f.a)({},r,t))}})}()},e.state={data:{"Loading...":null}},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(this.props.url).then(function(e){return e.json()}).then(function(t){return e.handleNestedUrl(t)}).catch(function(e){return console.log("Fail",e)})}},{key:"render",value:function(){var e=this.state.data,t=Object.keys(e),a=Object.values(e);return""===this.props.url?r.a.createElement(h.a,{to:"/data"}):r.a.createElement("div",{className:"info"},r.a.createElement("h1",null,"Detailed Information"),r.a.createElement(S.a,{className:"mt-5 mb-5"},r.a.createElement(O.a,{className:"col-centered"},r.a.createElement("table",null,r.a.createElement("tbody",{className:"tableBody"},r.a.createElement("tr",{className:"tableTitleRow"},r.a.createElement("th",{key:"title",style:{textAlign:"center"}},a[0]||"The"," description")))),r.a.createElement("table",null,r.a.createElement("tbody",{className:"tableBody"},t.map(function(t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{key:"col-"+t},t.replace(/_/g," ")),r.a.createElement("td",{key:e[t]},e[t]))}))))))}}]),t}(n.Component),w=a(47),U=a.n(w),F=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleSubmit=function(t){var a=t.currentTarget;t.currentTarget.checkValidity(),!1===a.checkValidity()?(t.preventDefault(),t.stopPropagation(),e.setState({isInvalid:!0})):(e.handleValues(t),e.setState({validated:!0,isInvalid:!1}))},e.checkboxToggle=function(t){e.setState({isChecked:!e.state.isChecked})},e.handleValues=function(t){var a={email:t.target.elements.email.value,password:t.target.elements.password.value};e.userCallBackMethod(a.email),e.state.isChecked&&localStorage.setItem("savedUser",JSON.stringify(a))},e.handleEmailChange=function(t){e.setState({isInvalid:!1})},e.userCallBackMethod=function(t){e.props.userEmail(t)},e.state={user:{},isChecked:!1,validated:!1,isInvalid:!1},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){null!==localStorage.getItem("savedUser")&&(localStorage.getItem("savedUser"),this.setState({user:JSON.parse(localStorage.getItem("savedUser"))})),null!==localStorage.getItem("currentUser")&&(localStorage.setItem("currentUser",JSON.stringify("")),this.userCallBackMethod(""))}},{key:"render",value:function(){var e=this.state,t=e.validated,a=e.isInvalid,n=e.user;return t?r.a.createElement(h.a,{to:"/data"}):r.a.createElement(O.a,{xs:6,className:"col-centered"},r.a.createElement(v.a,{noValidate:!0,validated:t,onSubmit:this.handleSubmit},r.a.createElement(v.a.Group,{controlId:"formEmail"},r.a.createElement(v.a.Label,null,"Email address"),r.a.createElement(v.a.Control,{required:!0,type:"email",name:"email",placeholder:"Enter email",isInvalid:a,onChange:this.handleEmailChange,defaultValue:n.email}),r.a.createElement(v.a.Control.Feedback,{type:"invalid",className:"invalid-feedback"},"Please choose a valid email.")),r.a.createElement(v.a.Group,{controlId:"formPassword"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{required:!0,name:"password",type:"password",placeholder:"Password",defaultValue:n.password})),r.a.createElement(v.a.Group,{controlId:"formBasicChecbox"},r.a.createElement(v.a.Check,{type:"checkbox",name:"saveUser",label:"Remember Me",onChange:this.checkboxToggle})),r.a.createElement(U.a,{variant:"primary",type:"submit"},"Login")))}}]),t}(n.Component),I=a(27),x=a.n(I),B=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Form"},r.a.createElement(x.a,{bg:"dark",variant:"dark"},r.a.createElement(d.b,{to:"/"},r.a.createElement(x.a.Brand,{href:"/starwars_fanapp/#/"},r.a.createElement("h1",{className:"mt-2"},"StarWars Fan App"))),r.a.createElement(x.a.Collapse,{className:"justify-content-end"},r.a.createElement(d.b,{to:"/"},r.a.createElement(x.a.Text,null,"User: ",r.a.createElement("a",{href:"/starwars_fanapp/#/"},this.props.user||"Signed off"))))))}}]),t}(n.Component),D=a(48),z=a.n(D),M=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleUser=function(t){e.setState({userEmail:t}),localStorage.setItem("currentUser",JSON.stringify(t))},e.handleUrl=function(t){e.setState({infoUrl:t})},e.handleData=function(t){e.setState({data:t})},e.state={userEmail:"",infoUrl:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,{basename:"/"},r.a.createElement("div",{className:"App"},r.a.createElement(B,{user:this.state.userEmail}),r.a.createElement(z.a,{className:"mt-5"},r.a.createElement(S.a,{className:"mt-3"},r.a.createElement(O.a,{className:"col-centered"},r.a.createElement(h.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(F,{userEmail:e.handleUser})}}),r.a.createElement(h.b,{path:"/data",render:function(t){return r.a.createElement(C,{url:e.handleUrl,userEmail:e.handleUser})}}),r.a.createElement(h.b,{path:"/info",render:function(t){return r.a.createElement(N,{url:e.state.infoUrl})}}))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[49,1,2]]]);
//# sourceMappingURL=main.5e6c7bb0.chunk.js.map